# AI 智能简历优化应用 - 快速开始指南

## 🎯 目标

本指南将帮助你在 10 分钟内快速搭建并运行 AI 智能简历优化应用。

---

## 📋 前置要求

### 必需软件
- **Docker Desktop** (推荐方式)
  - [下载 Docker Desktop for Mac](https://www.docker.com/products/docker-desktop)
  
**或者**

- **Node.js** 18+ ([下载](https://nodejs.org/))
- **Python** 3.10+ ([下载](https://www.python.org/downloads/))
- **PostgreSQL** 15+ ([下载](https://www.postgresql.org/download/))
- **Redis** 7+ ([下载](https://redis.io/download))

### 必需的 API Key
- **OpenAI API Key** - 用于 AI 功能
  - 访问 [OpenAI Platform](https://platform.openai.com/api-keys) 获取

---

## 🚀 方式一：使用 Docker Compose（推荐）

这是最简单快速的方式，无需手动安装数据库等依赖。

### 步骤 1：运行初始化脚本

```bash
cd /Users/robinxie/01-开发项目/AI\ 智能简历

# 给脚本添加执行权限
chmod +x scripts/init-project.sh

# 运行初始化脚本
./scripts/init-project.sh
```

脚本会自动：
- ✅ 创建前端项目（React + TypeScript）
- ✅ 创建后端项目（FastAPI）
- ✅ 生成环境变量模板
- ✅ 创建 Docker 配置文件

### 步骤 2：配置环境变量

```bash
# 复制环境变量模板
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env

# 编辑后端环境变量
nano backend/.env  # 或使用你喜欢的编辑器
```

**重要**：在 `backend/.env` 中填入你的 OpenAI API Key：
```env
OPENAI_API_KEY=sk-your-api-key-here
```

### 步骤 3：启动所有服务

```bash
# 启动所有服务（首次运行会构建镜像，需要几分钟）
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

### 步骤 4：访问应用

等待所有服务启动完成后（约 1-2 分钟），访问：

- **前端应用**：http://localhost:5173
- **后端 API**：http://localhost:8000
- **API 文档**：http://localhost:8000/docs
- **PostgreSQL**：localhost:5432
- **Redis**：localhost:6379

### 步骤 5：运行数据库迁移

```bash
# 进入后端容器
docker-compose exec backend bash

# 运行数据库迁移
alembic upgrade head

# 退出容器
exit
```

### 常用 Docker 命令

```bash
# 停止所有服务
docker-compose stop

# 启动所有服务
docker-compose start

# 重启所有服务
docker-compose restart

# 停止并删除所有容器
docker-compose down

# 停止并删除所有容器和数据卷（⚠️ 会删除数据库数据）
docker-compose down -v

# 查看日志
docker-compose logs -f [service_name]

# 进入容器
docker-compose exec [service_name] bash
```

---

## 🛠️ 方式二：本地开发模式

如果你想在本地直接运行，不使用 Docker。

### 步骤 1：安装数据库

#### 安装 PostgreSQL

**macOS (使用 Homebrew)**:
```bash
brew install postgresql@15
brew services start postgresql@15

# 创建数据库
createdb ai_resume
```

#### 安装 Redis

**macOS (使用 Homebrew)**:
```bash
brew install redis
brew services start redis
```

### 步骤 2：设置后端

```bash
cd backend

# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate  # macOS/Linux
# Windows: venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，填入必要配置

# 运行数据库迁移
alembic upgrade head

# 启动后端服务
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

后端服务将运行在：http://localhost:8000

### 步骤 3：设置前端

**打开新的终端窗口**：

```bash
cd frontend

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env

# 启动前端服务
npm run dev
```

前端服务将运行在：http://localhost:5173

### 步骤 4：（可选）启动 Celery Worker

**打开新的终端窗口**：

```bash
cd backend
source venv/bin/activate

# 启动 Celery Worker
celery -A app.tasks worker --loglevel=info
```

---

## 🧪 验证安装

### 1. 检查后端 API

访问 http://localhost:8000/docs，你应该看到 Swagger API 文档。

### 2. 测试健康检查

```bash
curl http://localhost:8000/api/v1/health
```

应该返回：
```json
{
  "status": "healthy",
  "database": "connected",
  "redis": "connected"
}
```

### 3. 测试前端

访问 http://localhost:5173，你应该看到应用的登录页面。

---

## 📝 第一次使用

### 1. 注册账号

1. 访问 http://localhost:5173
2. 点击"注册"
3. 填写用户名、邮箱、密码
4. 点击"注册"按钮

### 2. 登录系统

使用刚注册的账号登录。

### 3. 上传简历

1. 进入"简历管理"页面
2. 点击"上传简历"
3. 选择你的简历文件（PDF 或 Word）
4. 等待 AI 自动解析
5. 查看和编辑解析结果

### 4. 创建职位

1. 进入"职位管理"页面
2. 点击"添加职位"
3. 填写职位标题、公司、职位描述
4. 保存职位

### 5. 进行匹配分析

1. 进入"匹配分析"页面
2. 选择简历和职位
3. 点击"开始分析"
4. 查看匹配报告

### 6. 优化简历

1. 在匹配报告页面，点击"优化简历"
2. 查看优化建议
3. 点击"生成优化简历"
4. 对比原始简历和优化简历
5. 导出优化后的简历

---

## 🔧 常见问题

### Q1: Docker 容器启动失败

**检查端口占用**：
```bash
# 检查端口是否被占用
lsof -i :5173  # 前端端口
lsof -i :8000  # 后端端口
lsof -i :5432  # PostgreSQL 端口
lsof -i :6379  # Redis 端口

# 如果端口被占用，可以修改 docker-compose.yml 中的端口映射
```

**查看日志**：
```bash
docker-compose logs -f [service_name]
```

### Q2: 数据库连接失败

**检查数据库是否运行**：
```bash
# Docker 方式
docker-compose ps

# 本地方式
brew services list  # macOS
```

**检查数据库连接配置**：
确保 `backend/.env` 中的 `DATABASE_URL` 正确。

### Q3: OpenAI API 调用失败

**检查 API Key**：
- 确保在 `backend/.env` 中正确配置了 `OPENAI_API_KEY`
- 确保 API Key 有效且有足够的额度

**检查网络连接**：
- 确保可以访问 OpenAI API
- 如果在中国大陆，可能需要配置代理

### Q4: 前端无法连接后端

**检查后端是否运行**：
```bash
curl http://localhost:8000/api/v1/health
```

**检查前端环境变量**：
确保 `frontend/.env` 中的 `VITE_API_BASE_URL` 正确。

### Q5: 简历解析失败

**检查文件格式**：
- 确保文件是 PDF 或 Word 格式
- 文件大小不超过 10MB

**检查后端日志**：
```bash
docker-compose logs -f backend
```

---

## 📚 下一步

现在你已经成功运行了应用，可以：

1. **阅读文档**：
   - [需求文档](./需求文档.md) - 了解详细功能
   - [技术架构文档](./技术架构文档.md) - 了解系统设计
   - [API 接口文档](./API接口文档.md) - 了解 API 使用

2. **开始开发**：
   - 查看 [开发任务清单](./开发任务清单.md)
   - 按照 [实施计划](./实施计划.md) 进行开发

3. **自定义配置**：
   - 修改 UI 样式
   - 调整 AI Prompt
   - 添加新功能

---

## 🆘 获取帮助

如果遇到问题：

1. **查看日志**：
   ```bash
   # Docker 方式
   docker-compose logs -f
   
   # 本地方式
   # 查看后端日志：backend/logs/
   # 查看前端控制台
   ```

2. **检查配置**：
   - 确保所有环境变量正确配置
   - 确保所有服务正常运行

3. **重启服务**：
   ```bash
   # Docker 方式
   docker-compose restart
   
   # 本地方式
   # 重启各个服务
   ```

---

## ✅ 检查清单

在开始开发前，确保：

- [ ] Docker Desktop 已安装并运行（Docker 方式）
- [ ] 或 Node.js、Python、PostgreSQL、Redis 已安装（本地方式）
- [ ] 已获取 OpenAI API Key
- [ ] 已运行初始化脚本
- [ ] 已配置环境变量
- [ ] 所有服务正常启动
- [ ] 可以访问前端页面
- [ ] 可以访问 API 文档
- [ ] 数据库迁移成功
- [ ] 可以注册和登录

---

**祝你开发顺利！** 🎉

如有问题，请查看详细文档或检查日志。
